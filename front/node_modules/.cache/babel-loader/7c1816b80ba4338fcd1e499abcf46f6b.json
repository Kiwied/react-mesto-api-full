{"ast":null,"code":"import _toConsumableArray from\"C:\\\\dev\\\\mesto-react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"C:\\\\dev\\\\mesto-react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React from'react';import'../index.css';import Header from\"./header\";import Main from\"./Main\";import Footer from\"./Footer\";import PopupWithForm from\"./PopupWithForm\";import ImagePopup from\"./ImagePopup\";import EditProfilePopup from\"./EditProfilePopup\";import EditAvatarPopup from\"./EditAvatarPopup\";import{api}from\"../utils/Api\";import{CurrentUserContext}from\"../contexts/CurrentUserContext\";import AddPlacePopup from\"./AddPlacePopup\";function App(){var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),isEditProfilePopupOpen=_React$useState2[0],setIsEditProfilePopupOpen=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),isAddPlacePopupOpen=_React$useState4[0],setIsAddPlacePopupOpen=_React$useState4[1];var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),isEditAvatarPopupOpen=_React$useState6[0],setIsEditAvatarPopupOpen=_React$useState6[1];var _React$useState7=React.useState(false),_React$useState8=_slicedToArray(_React$useState7,2),isImagePopupOpen=_React$useState8[0],setIsImagePopupOpen=_React$useState8[1];var _React$useState9=React.useState({}),_React$useState10=_slicedToArray(_React$useState9,2),selectedCard=_React$useState10[0],setSelectedCard=_React$useState10[1];var _React$useState11=React.useState({}),_React$useState12=_slicedToArray(_React$useState11,2),currentUser=_React$useState12[0],setCurrentUser=_React$useState12[1];React.useEffect(function(){api.getUserInfo().then(function(res){setCurrentUser(res);}).catch(function(err){console.log(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430: \".concat(err));});},[]);function handleEditAvatarClick(){setIsEditAvatarPopupOpen(true);}function handleEditProfileClick(){setIsEditProfilePopupOpen(true);}function handleAddPlaceClick(){setIsAddPlacePopupOpen(true);}function handleCardClick(card){setIsImagePopupOpen(true);setSelectedCard(card);}function closeAllPopups(){setIsEditAvatarPopupOpen(false);setIsEditProfilePopupOpen(false);setIsAddPlacePopupOpen(false);setIsImagePopupOpen(false);setSelectedCard({});}function handleUpdateUser(newUserInfo){api.setNewUserInfo(newUserInfo).then(function(data){setCurrentUser(data);closeAllPopups();}).catch(function(err){console.log(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430: \".concat(err));});}function handleUpdateAvatar(_ref){var avatar=_ref.avatar;api.setNewAvatar({avatar:avatar}).then(function(data){setCurrentUser(data);closeAllPopups();}).catch(function(err){console.log(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430: \".concat(err));});}var _React$useState13=React.useState([]),_React$useState14=_slicedToArray(_React$useState13,2),cards=_React$useState14[0],setCards=_React$useState14[1];React.useEffect(function(){api.getInitialCards().then(function(res){setCards(res);}).catch(function(err){console.log(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430: \".concat(err));});},[]);function handleCardLike(card){var isLiked=card.likes.some(function(i){return i._id===currentUser._id;});(isLiked?api.dislike(card._id):api.like(card._id)).then(function(likedCard){var newCards=cards.map(function(currentCard){return currentCard._id===card._id?likedCard:currentCard;});setCards(newCards);}).catch(function(err){console.log(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430: \".concat(err));});}function handleCardDelete(card){api.delete(card._id).then(function(){var newCards=cards.filter(function(currentCard){return currentCard._id!==card._id;});setCards(newCards);}).catch(function(err){console.log(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430: \".concat(err));});}function handleAddPlaceSubmit(newCardInfo){api.addNewCard(newCardInfo).then(function(newCard){setCards([newCard].concat(_toConsumableArray(cards)));closeAllPopups();}).catch(function(err){console.log(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430: \".concat(err));});}return/*#__PURE__*/React.createElement(CurrentUserContext.Provider,{value:currentUser},/*#__PURE__*/React.createElement(\"div\",{className:\"page\"},/*#__PURE__*/React.createElement(\"div\",{className:\"content\"},/*#__PURE__*/React.createElement(Header,null),/*#__PURE__*/React.createElement(Main,{onEditProfile:handleEditProfileClick,onAddPlace:handleAddPlaceClick,onEditAvatar:handleEditAvatarClick,onCardClick:handleCardClick,cards:cards,onCardLike:handleCardLike,onCardDelete:handleCardDelete}),/*#__PURE__*/React.createElement(Footer,null),/*#__PURE__*/React.createElement(EditProfilePopup,{isOpen:isEditProfilePopupOpen,onClose:closeAllPopups,onUpdateUser:handleUpdateUser}),/*#__PURE__*/React.createElement(AddPlacePopup,{isOpen:isAddPlacePopupOpen,onClose:closeAllPopups,onAddPlace:handleAddPlaceSubmit}),/*#__PURE__*/React.createElement(EditAvatarPopup,{isOpen:isEditAvatarPopupOpen,onClose:closeAllPopups,onAvatarUpdate:handleUpdateAvatar}),/*#__PURE__*/React.createElement(PopupWithForm,{name:\"delete\",title:\"\\u0412\\u044B \\u0443\\u0432\\u0435\\u0440\\u0435\\u043D\\u044B?\",button:\"\\u0414\\u0430\"}),/*#__PURE__*/React.createElement(ImagePopup,{isOpen:isImagePopupOpen,onClose:closeAllPopups,card:selectedCard}))));}export default App;","map":{"version":3,"sources":["C:/dev/mesto-react/src/components/App.js"],"names":["React","Header","Main","Footer","PopupWithForm","ImagePopup","EditProfilePopup","EditAvatarPopup","api","CurrentUserContext","AddPlacePopup","App","useState","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isImagePopupOpen","setIsImagePopupOpen","selectedCard","setSelectedCard","currentUser","setCurrentUser","useEffect","getUserInfo","then","res","catch","err","console","log","handleEditAvatarClick","handleEditProfileClick","handleAddPlaceClick","handleCardClick","card","closeAllPopups","handleUpdateUser","newUserInfo","setNewUserInfo","data","handleUpdateAvatar","avatar","setNewAvatar","cards","setCards","getInitialCards","handleCardLike","isLiked","likes","some","i","_id","dislike","like","likedCard","newCards","map","currentCard","handleCardDelete","delete","filter","handleAddPlaceSubmit","newCardInfo","addNewCard","newCard"],"mappings":"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","sourcesContent":["import React from 'react';\nimport '../index.css';\nimport Header from \"./header\";\nimport Main from \"./Main\";\nimport Footer from \"./Footer\";\nimport PopupWithForm from \"./PopupWithForm\";\nimport ImagePopup from \"./ImagePopup\";\nimport EditProfilePopup from \"./EditProfilePopup\";\nimport EditAvatarPopup from \"./EditAvatarPopup\";\nimport { api } from \"../utils/Api\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\nimport AddPlacePopup from \"./AddPlacePopup\";\n\nfunction App() {\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\n  const [isImagePopupOpen, setIsImagePopupOpen] = React.useState(false);\n  const [selectedCard, setSelectedCard] = React.useState({});\n  const [currentUser, setCurrentUser] = React.useState({});\n\n  React.useEffect(() => {\n    api.getUserInfo()\n      .then(res => {\n        setCurrentUser(res);\n      })\n      .catch(err => {\n        console.log(`Ошибка: ${err}`);\n      })\n  }, [])\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(true);\n  }\n\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true);\n  }\n\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(true);\n  }\n\n  function handleCardClick(card) {\n    setIsImagePopupOpen(true);\n    setSelectedCard(card);\n  }\n\n  function closeAllPopups() {\n    setIsEditAvatarPopupOpen(false);\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsImagePopupOpen(false);\n    setSelectedCard({});\n  }\n\n  function handleUpdateUser(newUserInfo) {\n    api.setNewUserInfo(newUserInfo)\n      .then((data) => {\n        setCurrentUser(data);\n        closeAllPopups();\n      })\n      .catch(err => {\n        console.log(`Ошибка: ${err}`)\n      });\n  }\n\n  function handleUpdateAvatar({avatar}) {\n    api.setNewAvatar({avatar})\n      .then((data) => {\n        setCurrentUser(data);\n        closeAllPopups();\n      })\n      .catch(err => {\n        console.log(`Ошибка: ${err}`)\n      });\n  }\n\n  const [cards, setCards] = React.useState([]);\n\n  React.useEffect(() => {\n    api.getInitialCards()\n      .then(res => {\n        setCards(res);\n      })\n      .catch(err => {\n        console.log(`Ошибка: ${err}`)\n      });\n  }, [])\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n    (isLiked ? api.dislike(card._id) : api.like(card._id))\n      .then((likedCard) => {\n        const newCards = cards.map((currentCard) =>\n          currentCard._id === card._id ? likedCard : currentCard\n        );\n        setCards(newCards);\n      })\n      .catch(err => {\n        console.log(`Ошибка: ${err}`)\n      });\n  }\n\n  function handleCardDelete(card) {\n    api.delete(card._id)\n      .then(() => {\n        const newCards = cards.filter(currentCard =>\n          currentCard._id !== card._id\n        );\n        setCards(newCards);\n      })\n      .catch(err => {\n        console.log(`Ошибка: ${err}`)\n      });\n  }\n\n  function handleAddPlaceSubmit(newCardInfo) {\n    api.addNewCard(newCardInfo)\n      .then((newCard) => {\n        setCards([newCard, ...cards]);\n        closeAllPopups();\n      })\n      .catch(err => {\n        console.log(`Ошибка: ${err}`)\n      });\n  }\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"page\">\n        <div className=\"content\">\n          <Header/>\n          <Main\n            onEditProfile={handleEditProfileClick}\n            onAddPlace={handleAddPlaceClick}\n            onEditAvatar={handleEditAvatarClick}\n            onCardClick={handleCardClick}\n            cards={cards}\n            onCardLike={handleCardLike}\n            onCardDelete={handleCardDelete}\n          />\n          <Footer/>\n\n          <EditProfilePopup\n            isOpen={isEditProfilePopupOpen}\n            onClose={closeAllPopups}\n            onUpdateUser={handleUpdateUser}\n          />\n\n          <AddPlacePopup\n            isOpen={isAddPlacePopupOpen}\n            onClose={closeAllPopups}\n            onAddPlace={handleAddPlaceSubmit}\n          />\n\n          <EditAvatarPopup\n            isOpen={isEditAvatarPopupOpen}\n            onClose={closeAllPopups}\n            onAvatarUpdate={handleUpdateAvatar}\n          />\n\n          <PopupWithForm\n            name=\"delete\"\n            title=\"Вы уверены?\"\n            button=\"Да\"\n          />\n\n          <ImagePopup\n            isOpen={isImagePopupOpen}\n            onClose={closeAllPopups}\n            card={selectedCard}\n          />\n        </div>\n      </div>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}