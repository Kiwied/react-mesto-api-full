{"ast":null,"code":"class Auth {\n  constructor() {\n    this._baseUrl = 'https://auth.nomoreparties.co';\n  }\n\n  register(pass, email) {\n    return fetch(`${this._baseUrl}/signup`, {\n      method: 'POST',\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        \"password\": pass,\n        \"email\": email\n      })\n    }).then(res => {\n      console.log(res);\n\n      try {\n        if (res.status === 201) {\n          return res.json();\n        }\n      } catch (err) {\n        return err;\n      }\n    }).then(res => {\n      return res;\n    }).catch(err => console.log(err));\n  }\n\n  singIn(pass, email) {\n    return fetch(`${this._baseUrl}/signin`, {\n      method: 'POST',\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        \"password\": pass,\n        \"email\": email\n      })\n    }).then(res => res.json()).then(data => {\n      if (data.token) {\n        localStorage.setItem('token', data.token);\n        return data;\n      } else {\n        return;\n      }\n    }).catch(err => console.log(err));\n  }\n\n  getContent(token) {\n    return fetch(`${this._baseUrl}/users/me`, {\n      method: 'GET',\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": `Bearer ${token}`\n      }\n    }).then(res => res.json()).catch(err => console.log(err));\n  }\n\n}\n\nexport const auth = new Auth();","map":{"version":3,"sources":["C:/dev/mesto-react/src/utils/Auth.js"],"names":["Auth","constructor","_baseUrl","register","pass","email","fetch","method","headers","body","JSON","stringify","then","res","console","log","status","json","err","catch","singIn","data","token","localStorage","setItem","getContent","auth"],"mappings":"AAAA,MAAMA,IAAN,CAAW;AACTC,EAAAA,WAAW,GAAG;AACZ,SAAKC,QAAL,GAAgB,+BAAhB;AACD;;AAEDC,EAAAA,QAAQ,CAACC,IAAD,EAAOC,KAAP,EAAc;AACpB,WAAOC,KAAK,CAAE,GAAE,KAAKJ,QAAS,SAAlB,EAA4B;AACtCK,MAAAA,MAAM,EAAE,MAD8B;AAEtCC,MAAAA,OAAO,EAAE;AAAE,wBAAgB;AAAlB,OAF6B;AAGtCC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnB,oBAAYP,IADO;AAEnB,iBAASC;AAFU,OAAf;AAHgC,KAA5B,CAAL,CAQJO,IARI,CAQEC,GAAD,IAAS;AACbC,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;;AACA,UAAI;AACF,YAAIA,GAAG,CAACG,MAAJ,KAAe,GAAnB,EAAuB;AACrB,iBAAOH,GAAG,CAACI,IAAJ,EAAP;AACD;AACF,OAJD,CAIE,OAAMC,GAAN,EAAU;AACV,eAAQA,GAAR;AACD;AACF,KAjBI,EAkBJN,IAlBI,CAkBCC,GAAG,IAAI;AACX,aAAOA,GAAP;AACD,KApBI,EAqBJM,KArBI,CAqBED,GAAG,IAAIJ,OAAO,CAACC,GAAR,CAAYG,GAAZ,CArBT,CAAP;AAsBD;;AAEDE,EAAAA,MAAM,CAAChB,IAAD,EAAOC,KAAP,EAAc;AAClB,WAAOC,KAAK,CAAE,GAAE,KAAKJ,QAAS,SAAlB,EAA4B;AACtCK,MAAAA,MAAM,EAAE,MAD8B;AAEtCC,MAAAA,OAAO,EAAE;AAAE,wBAAgB;AAAlB,OAF6B;AAGtCC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnB,oBAAYP,IADO;AAEnB,iBAASC;AAFU,OAAf;AAHgC,KAA5B,CAAL,CAQJO,IARI,CAQCC,GAAG,IAAIA,GAAG,CAACI,IAAJ,EARR,EASJL,IATI,CASCS,IAAI,IAAI;AACZ,UAAIA,IAAI,CAACC,KAAT,EAAgB;AACdC,QAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BH,IAAI,CAACC,KAAnC;AACA,eAAOD,IAAP;AACD,OAHD,MAGO;AACL;AACD;AACF,KAhBI,EAiBJF,KAjBI,CAiBED,GAAG,IAAIJ,OAAO,CAACC,GAAR,CAAYG,GAAZ,CAjBT,CAAP;AAkBD;;AAEDO,EAAAA,UAAU,CAACH,KAAD,EAAQ;AAChB,WAAOhB,KAAK,CAAE,GAAE,KAAKJ,QAAS,WAAlB,EAA8B;AACxCK,MAAAA,MAAM,EAAE,KADgC;AAExCC,MAAAA,OAAO,EAAE;AACP,wBAAgB,kBADT;AAEP,yBAAkB,UAASc,KAAM;AAF1B;AAF+B,KAA9B,CAAL,CAOJV,IAPI,CAOCC,GAAG,IAAIA,GAAG,CAACI,IAAJ,EAPR,EAQJE,KARI,CAQED,GAAG,IAAIJ,OAAO,CAACC,GAAR,CAAYG,GAAZ,CART,CAAP;AASD;;AA7DQ;;AAgEX,OAAO,MAAMQ,IAAI,GAAG,IAAI1B,IAAJ,EAAb","sourcesContent":["class Auth {\n  constructor() {\n    this._baseUrl = 'https://auth.nomoreparties.co'\n  }\n\n  register(pass, email) {\n    return fetch(`${this._baseUrl}/signup`, {\n      method: 'POST',\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({\n        \"password\": pass,\n        \"email\": email\n      })\n    })\n      .then((res) => {\n        console.log(res);\n        try {\n          if (res.status === 201){\n            return res.json();\n          }\n        } catch(err){\n          return (err);\n        }\n      })\n      .then(res => {\n        return res;\n      })\n      .catch(err => console.log(err))\n  }\n\n  singIn(pass, email) {\n    return fetch(`${this._baseUrl}/signin`, {\n      method: 'POST',\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({\n        \"password\": pass,\n        \"email\": email\n      })\n    })\n      .then(res => res.json())\n      .then(data => {\n        if (data.token) {\n          localStorage.setItem('token', data.token);\n          return data;\n        } else {\n          return;\n        }\n      })\n      .catch(err => console.log(err))\n  }\n\n  getContent(token) {\n    return fetch(`${this._baseUrl}/users/me`, {\n      method: 'GET',\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": `Bearer ${token}`\n      }\n    })\n      .then(res => res.json())\n      .catch(err => console.log(err))\n  }\n}\n\nexport const auth = new Auth();\n"]},"metadata":{},"sourceType":"module"}