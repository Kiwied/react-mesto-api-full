{"ast":null,"code":"import _slicedToArray from\"C:\\\\dev\\\\mesto-react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React from\"react\";import{Link,useHistory}from\"react-router-dom\";import{auth}from\"../utils/Auth\";export default function Login(props){var _React$useState=React.useState(1),_React$useState2=_slicedToArray(_React$useState,2),opacity=_React$useState2[0],setOpacity=_React$useState2[1];var _React$useState3=React.useState(''),_React$useState4=_slicedToArray(_React$useState3,2),email=_React$useState4[0],setEmail=_React$useState4[1];var _React$useState5=React.useState(''),_React$useState6=_slicedToArray(_React$useState5,2),password=_React$useState6[0],setPassword=_React$useState6[1];var history=useHistory();var linkStyle={color:'white',textDecoration:'none',transition:'opacity .15s linear',opacity:opacity};function handleMouseEnter(){setOpacity(0.6);}function handleMouseLeave(){setOpacity(1);}function handleRegisterRedirect(){props.onHeaderChange('register');}function handleEmailChange(evt){setEmail(evt.target.value);}function handlePasswordChange(evt){setPassword(evt.target.value);}function handleSubmit(evt){evt.preventDefault();if(!password||!email){return;}auth.singIn(password,email).then(function(data){if(data.token){setPassword('');setEmail('');props.handleLogin();history.push('/');}}).catch(function(){props.onError();});}return/*#__PURE__*/React.createElement(\"main\",null,/*#__PURE__*/React.createElement(\"section\",{className:\"auth\"},/*#__PURE__*/React.createElement(\"form\",{className:\"auth-form\",onSubmit:handleSubmit},/*#__PURE__*/React.createElement(\"h2\",{className:\"auth-form__title\"},\"\\u0412\\u0445\\u043E\\u0434\"),/*#__PURE__*/React.createElement(\"input\",{type:\"email\",placeholder:\"Email\",className:\"auth-form__input\",value:email,onChange:handleEmailChange,required:true}),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",placeholder:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\",className:\"auth-form__input\",value:password,onChange:handlePasswordChange,required:true}),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"auth-form__submit\",value:\"loggedIn\",onClick:handleSubmit},\"\\u0412\\u043E\\u0439\\u0442\\u0438\")),/*#__PURE__*/React.createElement(\"p\",{className:\"auth__redirect\"},\"\\u0415\\u0449\\u0451 \\u043D\\u0435 \\u0437\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u044B? \",/*#__PURE__*/React.createElement(Link,{to:\"/signup\",style:linkStyle,onMouseEnter:handleMouseEnter,onMouseLeave:handleMouseLeave,onClick:handleRegisterRedirect},\"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0430\\u0446\\u0438\\u044F\"))));}","map":{"version":3,"sources":["C:/dev/mesto-react/src/components/Login.js"],"names":["React","Link","useHistory","auth","Login","props","useState","opacity","setOpacity","email","setEmail","password","setPassword","history","linkStyle","color","textDecoration","transition","handleMouseEnter","handleMouseLeave","handleRegisterRedirect","onHeaderChange","handleEmailChange","evt","target","value","handlePasswordChange","handleSubmit","preventDefault","singIn","then","data","token","handleLogin","push","catch","onError"],"mappings":"gJAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,IAAT,CAAeC,UAAf,KAAiC,kBAAjC,CACA,OAASC,IAAT,KAAqB,eAArB,CAEA,cAAe,SAASC,CAAAA,KAAT,CAAeC,KAAf,CAAsB,qBACLL,KAAK,CAACM,QAAN,CAAe,CAAf,CADK,oDAC5BC,OAD4B,qBACnBC,UADmB,0CAETR,KAAK,CAACM,QAAN,CAAe,EAAf,CAFS,qDAE5BG,KAF4B,qBAErBC,QAFqB,0CAGHV,KAAK,CAACM,QAAN,CAAe,EAAf,CAHG,qDAG5BK,QAH4B,qBAGlBC,WAHkB,qBAKnC,GAAMC,CAAAA,OAAO,CAAGX,UAAU,EAA1B,CAEA,GAAMY,CAAAA,SAAS,CAAG,CAChBC,KAAK,CAAE,OADS,CAEhBC,cAAc,CAAE,MAFA,CAGhBC,UAAU,CAAE,qBAHI,CAIhBV,OAAO,CAAEA,OAJO,CAAlB,CAOA,QAASW,CAAAA,gBAAT,EAA4B,CAC1BV,UAAU,CAAC,GAAD,CAAV,CACD,CAED,QAASW,CAAAA,gBAAT,EAA4B,CAC1BX,UAAU,CAAC,CAAD,CAAV,CACD,CAED,QAASY,CAAAA,sBAAT,EAAkC,CAChCf,KAAK,CAACgB,cAAN,CAAqB,UAArB,EACD,CAED,QAASC,CAAAA,iBAAT,CAA2BC,GAA3B,CAAgC,CAC9Bb,QAAQ,CAACa,GAAG,CAACC,MAAJ,CAAWC,KAAZ,CAAR,CACD,CAED,QAASC,CAAAA,oBAAT,CAA8BH,GAA9B,CAAmC,CACjCX,WAAW,CAACW,GAAG,CAACC,MAAJ,CAAWC,KAAZ,CAAX,CACD,CAED,QAASE,CAAAA,YAAT,CAAsBJ,GAAtB,CAA2B,CACzBA,GAAG,CAACK,cAAJ,GACA,GAAI,CAACjB,QAAD,EAAa,CAACF,KAAlB,CAAyB,CACvB,OACD,CACDN,IAAI,CAAC0B,MAAL,CAAYlB,QAAZ,CAAsBF,KAAtB,EACGqB,IADH,CACQ,SAAAC,IAAI,CAAI,CACZ,GAAIA,IAAI,CAACC,KAAT,CAAgB,CACdpB,WAAW,CAAC,EAAD,CAAX,CACAF,QAAQ,CAAC,EAAD,CAAR,CACAL,KAAK,CAAC4B,WAAN,GACApB,OAAO,CAACqB,IAAR,CAAa,GAAb,EACD,CACF,CARH,EASGC,KATH,CASS,UAAM,CACX9B,KAAK,CAAC+B,OAAN,GACD,CAXH,EAYD,CAED,mBACE,6CACE,+BAAS,SAAS,CAAC,MAAnB,eAEE,4BAAM,SAAS,CAAC,WAAhB,CACM,QAAQ,CAAET,YADhB,eAGE,0BAAI,SAAS,CAAC,kBAAd,6BAHF,cAIE,6BACE,IAAI,CAAC,OADP,CAEE,WAAW,CAAC,OAFd,CAGE,SAAS,CAAC,kBAHZ,CAIE,KAAK,CAAElB,KAJT,CAKE,QAAQ,CAAEa,iBALZ,CAME,QAAQ,KANV,EAJF,cAYE,6BACE,IAAI,CAAC,UADP,CAEE,WAAW,CAAC,sCAFd,CAGE,SAAS,CAAC,kBAHZ,CAIE,KAAK,CAAEX,QAJT,CAKE,QAAQ,CAAEe,oBALZ,CAME,QAAQ,KANV,EAZF,cAoBE,8BAAQ,IAAI,CAAC,QAAb,CACQ,SAAS,CAAC,mBADlB,CAEQ,KAAK,CAAC,UAFd,CAGQ,OAAO,CAAEC,YAHjB,mCApBF,CAFF,cA+BE,yBAAG,SAAS,CAAC,gBAAb,oJAC4B,oBAAC,IAAD,EAAM,EAAE,CAAC,SAAT,CACM,KAAK,CAAEb,SADb,CAEM,YAAY,CAAEI,gBAFpB,CAGM,YAAY,CAAEC,gBAHpB,CAIM,OAAO,CAAEC,sBAJf,6EAD5B,CA/BF,CADF,CADF,CA8CD","sourcesContent":["import React from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { auth } from \"../utils/Auth\";\n\nexport default function Login(props) {\n  const [opacity, setOpacity] = React.useState(1);\n  const [email, setEmail] = React.useState('');\n  const [password, setPassword] = React.useState('');\n\n  const history = useHistory();\n\n  const linkStyle = {\n    color: 'white',\n    textDecoration: 'none',\n    transition: 'opacity .15s linear',\n    opacity: opacity\n  }\n\n  function handleMouseEnter() {\n    setOpacity(0.6);\n  }\n\n  function handleMouseLeave() {\n    setOpacity(1);\n  }\n\n  function handleRegisterRedirect() {\n    props.onHeaderChange('register')\n  }\n\n  function handleEmailChange(evt) {\n    setEmail(evt.target.value);\n  }\n\n  function handlePasswordChange(evt) {\n    setPassword(evt.target.value);\n  }\n\n  function handleSubmit(evt) {\n    evt.preventDefault();\n    if (!password || !email) {\n      return;\n    }\n    auth.singIn(password, email)\n      .then(data => {\n        if (data.token) {\n          setPassword('');\n          setEmail('');\n          props.handleLogin();\n          history.push('/');\n        }\n      })\n      .catch(() => {\n        props.onError();\n      })\n  }\n\n  return (\n    <main>\n      <section className=\"auth\">\n\n        <form className=\"auth-form\"\n              onSubmit={handleSubmit}\n        >\n          <h2 className=\"auth-form__title\">Вход</h2>\n          <input\n            type=\"email\"\n            placeholder=\"Email\"\n            className=\"auth-form__input\"\n            value={email}\n            onChange={handleEmailChange}\n            required\n          />\n          <input\n            type=\"password\"\n            placeholder=\"Пароль\"\n            className=\"auth-form__input\"\n            value={password}\n            onChange={handlePasswordChange}\n            required\n          />\n          <button type=\"submit\"\n                  className=\"auth-form__submit\"\n                  value=\"loggedIn\"\n                  onClick={handleSubmit}\n          >\n            Войти\n          </button>\n        </form>\n\n        <p className=\"auth__redirect\">\n          Ещё не зарегистрированы? {<Link to=\"/signup\"\n                                          style={linkStyle}\n                                          onMouseEnter={handleMouseEnter}\n                                          onMouseLeave={handleMouseLeave}\n                                          onClick={handleRegisterRedirect}\n        >\n          Регистриация\n        </Link>}\n        </p>\n      </section>\n    </main>\n  )\n}\n\n"]},"metadata":{},"sourceType":"module"}