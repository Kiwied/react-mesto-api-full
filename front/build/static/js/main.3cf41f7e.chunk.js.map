{"version":3,"sources":["images/logo.svg","images/icon-ok.svg","images/icon-cross.svg","contexts/HeaderContext.js","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/Login.js","components/ImagePopup.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","utils/Api.js","utils/utils.js","components/AddPlacePopup.js","components/ProtectedRoute.js","components/Register.js","contexts/infoTooltipContext.js","components/InfoTooltip.js","utils/Auth.js","components/App.js","index.js"],"names":["module","exports","HeaderContext","React","createContext","headers","register","text","redirectPath","login","Header","props","headerContext","useContext","className","src","logoPath","alt","loggedIn","email","to","onClick","onHeaderChange","console","log","onSignOut","CurrentUserContext","Card","currentUser","isOwn","card","owner","_id","cardDeleteButtonClassName","isLiked","likes","some","i","cardLikeButtonClassName","onCardClick","link","name","type","onCardLike","length","onCardDelete","Main","onEditAvatar","avatar","onEditProfile","about","onAddPlace","cards","map","currentCard","key","Footer","Login","useState","setEmail","password","setPassword","handleSubmit","evt","preventDefault","onSubmit","placeholder","value","onChange","target","required","ImagePopup","useEffect","overlayCloseEffect","isOpen","id","onClose","PopupWithForm","noValidate","title","children","button","EditProfilePopup","setName","description","setDescription","onUpdateUser","minLength","maxLength","pattern","EditAvatarPopup","urlRef","useRef","current","onAvatarUpdate","ref","api","baseUrl","this","_baseUrl","_headers","res","ok","json","Promise","reject","status","fetch","then","_checkResponseData","method","body","JSON","stringify","cardId","authorization","AddPlacePopup","setLink","ProtectedRoute","Component","component","Register","handleLoginRedirect","InfoTooltipContext","infoTooltipCaptions","success","imgPath","okPath","fail","failPath","InfoTooltip","infoTooltipContext","auth","pass","err","data","token","localStorage","setItem","withRouter","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isImagePopupOpen","setIsImagePopupOpen","isInfoTooltipOpen","setIsInfoTooltipOpen","selectedCard","setSelectedCard","setCurrentUser","setLoggedIn","setHeaderContext","setInfoTooltipContext","history","useHistory","popupName","handleOverlayClose","classList","contains","closeAllPopups","document","getElementById","addEventListener","removeEventListener","handleInfoTooltipOpen","getUserInfo","catch","setCards","handleLogin","getInitialCards","jwt","getItem","getContent","push","tokenCheck","Provider","removeItem","path","finally","singIn","dislike","like","likedCard","newCards","delete","filter","newUserInfo","setNewUserInfo","newCardInfo","addNewCard","newCard","setNewAvatar","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.3cf41f7e.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.e889e45f.svg\";","module.exports = __webpack_public_path__ + \"static/media/icon-ok.75df9ada.svg\";","module.exports = __webpack_public_path__ + \"static/media/icon-cross.db56ee32.svg\";","import React from \"react\";\n\nexport const HeaderContext = React.createContext();\n\nexport const headers = {\n  register: {\n    text: 'Войти',\n    redirectPath: '/signin'\n  },\n  login: {\n    text: 'Регистрация',\n    redirectPath: '/signup'\n  }\n}\n","import logoPath from \"../images/logo.svg\";\nimport React from \"react\";\nimport { Link } from 'react-router-dom';\nimport { HeaderContext } from \"../contexts/HeaderContext\";\n\nexport default function Header(props) {\n  const headerContext = React.useContext(HeaderContext);\n\n  function handleLinkClick() {\n    if (headerContext.text === 'Войти') {\n      props.onHeaderChange('login')\n    }\n    if (headerContext.text === 'Регистрация') {\n      props.onHeaderChange('register')\n    }\n    console.log(headerContext);\n  }\n\n  return (\n      <header className=\"header\">\n          <img src={logoPath}\n               alt=\"Логотип сервиса Mesto\"\n               className=\"header__logo\"\n          />\n\n          <div className=\"header__container\">\n            <p className=\"header__auth\">\n              { props.loggedIn\n                ? (`${props.email}  `)\n                : (\n                  <Link to={headerContext.redirectPath}\n                        className=\"link\"\n                        onClick={handleLinkClick}\n                  >\n                    {headerContext.text}\n                  </Link>\n                )\n              }\n            </p>\n            {props.loggedIn && <Link to=\"\"\n                                     className=\"link link_header\"\n                                     onClick={props.onSignOut}\n            >\n              Выйти\n            </Link>}\n          </div>\n      </header>\n  )\n}\n","import React from \"react\";\n\nexport const CurrentUserContext = React.createContext();\n","import React from \"react\";\nimport {CurrentUserContext} from \"../contexts/CurrentUserContext\";\n\nexport default function Card(props) {\n  const currentUser = React.useContext(CurrentUserContext);\n\n  const isOwn = props.card.owner._id === currentUser._id;\n  const cardDeleteButtonClassName = `element__delete ${\n    isOwn ? '' : 'element__delete_hidden'}`;\n\n\n  const isLiked = props.card.likes.some(i => i._id === currentUser._id);\n  const cardLikeButtonClassName = `element__like ${\n    isLiked ? 'element__like_active' : ''}`;\n\n  function handleClick() {\n    props.onCardClick(props.card);\n  }\n\n  function handleLikeClick() {\n    props.onCardLike(props.card);\n  }\n\n  function handleCardDelete() {\n    props.onCardDelete(props.card);\n  }\n\n  return(\n      <li className=\"element\">\n        <img className=\"element__image\"\n             onClick={handleClick}\n             src={props.card.link}\n             alt={`Фото ${props.card.name}`}\n        />\n        <div className=\"element__сaption\">\n          <h3 className=\"element__title\">{props.card.name}</h3>\n          <div className=\"element__likes\">\n            <button type=\"button\"\n                    className={cardLikeButtonClassName}\n                    onClick={handleLikeClick}\n            />\n            <p className=\"element__like-counter\">{props.card.likes.length}</p>\n          </div>\n        </div>\n        <button type=\"button\"\n                className={cardDeleteButtonClassName}\n                onClick={handleCardDelete}\n        />\n      </li>\n  )\n}\n","import React from \"react\";\nimport Card from \"./Card.js\";\nimport {CurrentUserContext} from \"../contexts/CurrentUserContext\";\n\nexport default function Main(props) {\n  const currentUser = React.useContext(CurrentUserContext);\n\n  return (\n    <main>\n      <section className=\"profile\">\n        <div className=\"profile__main\">\n          <div className=\"profile__avatar-container\"\n               onClick={props.onEditAvatar}>\n            <img\n              alt=\"Аватар профиля\"\n              className=\"profile__avatar\"\n              src={currentUser.avatar}\n            />\n            <div className=\"profile__avatar_overlay\"/>\n          </div>\n          <div className=\"profile__info\">\n            <div className=\"profile__row\">\n              <h2 className=\"profile__name\">{currentUser.name}</h2>\n              <button\n                onClick={props.onEditProfile}\n                type=\"button\"\n                className=\"profile__edit\">\n              </button>\n            </div>\n            <p className=\"profile__description\">{currentUser.about}</p>\n          </div>\n        </div>\n        <button\n          onClick={props.onAddPlace}\n          type=\"button\"\n          className=\"profile__add\">\n        </button>\n      </section>\n\n      <section>\n        <ul className=\"elements\">\n          {props.cards.map(currentCard => (\n            <Card\n              card={currentCard}\n              key={currentCard._id}\n              onCardClick={props.onCardClick}\n              onCardLike={props.onCardLike}\n              onCardDelete={props.onCardDelete}\n            />\n          ))}\n        </ul>\n      </section>\n    </main>\n  )\n}\n","import React from \"react\";\r\n\r\nexport default function Footer() {\r\n  return(\r\n      <footer className=\"footer\">\r\n        <p className=\"footer__copyright\">&copy; 2020 Mesto Russia</p>\r\n      </footer>\r\n  )\r\n}","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nexport default function Login(props) {\n  const [email, setEmail] = React.useState('');\n  const [password, setPassword] = React.useState('');\n\n  function handleRegisterRedirect() {\n    props.onHeaderChange('register')\n  }\n\n  function handleEmailChange(evt) {\n    setEmail(evt.target.value);\n  }\n\n  function handlePasswordChange(evt) {\n    setPassword(evt.target.value);\n  }\n\n  function handleSubmit(evt) {\n    evt.preventDefault();\n    if (!password || !email) {\n      return;\n    }\n    props.onSubmit(password, email);\n    setEmail('');\n    setPassword('');\n  }\n\n  return (\n    <main>\n      <section className=\"auth\">\n\n        <form className=\"auth-form\"\n              onSubmit={handleSubmit}\n        >\n          <h2 className=\"auth-form__title\">Вход</h2>\n          <input\n            type=\"email\"\n            placeholder=\"Email\"\n            className=\"auth-form__input\"\n            value={email}\n            onChange={handleEmailChange}\n            required\n          />\n          <input\n            type=\"password\"\n            placeholder=\"Пароль\"\n            className=\"auth-form__input\"\n            value={password}\n            onChange={handlePasswordChange}\n            required\n          />\n          <button type=\"submit\"\n                  className=\"auth-form__submit\"\n                  value=\"loggedIn\"\n                  onClick={handleSubmit}\n          >\n            Войти\n          </button>\n        </form>\n\n        <p className=\"auth__redirect\">\n          Ещё не зарегистрированы? {<Link to=\"/signup\"\n                                          className=\"link\"\n                                          onClick={handleRegisterRedirect}\n        >\n          Регистриация\n        </Link>}\n        </p>\n      </section>\n    </main>\n  )\n}\n\n","import React from \"react\";\n\nexport default function ImagePopup(props) {\n  React.useEffect(() => {\n    props.overlayCloseEffect('enlarged')\n  }, [])\n\n  return (\n      <section className={`popup ${props.isOpen && 'popup_opened'}`}\n               id=\"popup__enlarged\">\n        <div className=\"popup__enlarged\">\n          <img className=\"popup__image\"\n               src={props.card.link}\n               alt={props.card.name}/>\n          <p className=\"popup__place\">{props.card.name}</p>\n          <button type=\"button\"\n                  className=\"popup__close\"\n                  onClick={props.onClose}\n          >\n          </button>\n        </div>\n      </section>\n  )\n}\n","import React from \"react\";\n\nexport default function PopupWithForm(props) {\n  React.useEffect(() => {\n    props.overlayCloseEffect(props.name);\n  }, [])\n\n  return (\n      <section\n        className={`popup ${props.isOpen && 'popup_opened'}`}\n        id={`popup__${props.name}`}\n      >\n        <form className=\"form\"\n              onSubmit={props.onSubmit}\n              noValidate\n        >\n          <h3 className=\"form__title\">{props.title}</h3>\n          {props.children}\n          <button type=\"submit\"\n                  name={props.button}\n                  className=\"form__save\"\n          >\n            {props.button}\n          </button>\n          <button onClick={props.onClose}\n                  type=\"button\"\n                  className=\"popup__close\"\n          >\n          </button>\n        </form>\n      </section>\n  )\n}\n","import PopupWithForm from \"./PopupWithForm\";\nimport React from \"react\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\n\nexport default function EditProfilePopup(props) {\n  const [name, setName] = React.useState('');\n  const [description, setDescription] = React.useState('');\n\n  const currentUser = React.useContext(CurrentUserContext);\n\n  React.useEffect(() => {\n    setName(currentUser.name);\n    setDescription(currentUser.about);\n  }, [currentUser]);\n\n  function handleNameChange(evt) {\n    setName(evt.target.value);\n  }\n\n  function handleDescriptionChange(evt) {\n    setDescription(evt.target.value);\n  }\n\n\n  function handleSubmit(evt) {\n    evt.preventDefault();\n\n    props.onUpdateUser({\n      name: name,\n      about: description\n    });\n  }\n\n  return(\n    <PopupWithForm\n      isOpen={props.isOpen}\n      onClose={props.onClose}\n      onSubmit={handleSubmit}\n      overlayCloseEffect={props.overlayCloseEffect}\n      name=\"profile\"\n      title=\"Редактировать профиль\"\n      button=\"Сохранить\"\n      children={(\n        <>\n          <input\n            type=\"text\"\n            id=\"name-input\"\n            name=\"name\"\n            placeholder=\"Имя\"\n            value={name || ''}\n            onChange={handleNameChange}\n            className=\"form__input form__input_name\"\n            minLength=\"2\" maxLength=\"40\"\n            pattern=\"^[A-Za-zА-Яа-яЁё \\-]+$\"\n            required\n          />\n          <span className=\"form__input-error\"\n                id=\"name-input-error\">\n          </span>\n          <input\n            type=\"text\"\n            id=\"description-input\"\n            name=\"about\"\n            placeholder=\"Описание\"\n            value={description || ''}\n            onChange={handleDescriptionChange}\n            className=\"form__input form__input_description\"\n            minLength=\"2\" maxLength=\"200\"\n            pattern=\"^[A-Za-zА-Яа-яЁё, \\-]+$\"\n            required\n          />\n          <span className=\"form__input-error\"\n                id=\"description-input-error\">\n          </span>\n        </>\n      )}\n    />\n  )\n}\n","import PopupWithForm from \"./PopupWithForm\";\nimport React from \"react\";\n\nexport default function EditAvatarPopup(props) {\n  const urlRef = React.useRef();\n\n  React.useEffect(() => {\n    urlRef.current.value = '';\n  }, [props.isOpen])\n\n  function handleSubmit(evt) {\n    evt.preventDefault();\n    props.onAvatarUpdate({\n      avatar: urlRef.current.value,\n    })\n  }\n\n  function handleClose() {\n    props.onClose();\n  }\n\n  return (\n    <PopupWithForm\n      isOpen={props.isOpen}\n      onClose={handleClose}\n      onSubmit={handleSubmit}\n      overlayCloseEffect={props.overlayCloseEffect}\n      name=\"avatar\"\n      title=\"Обновить аватар\"\n      button=\"Сохранить\"\n      children={(\n        <>\n          <input type=\"url\"\n                 id=\"avatar-link-input\"\n                 name=\"avatar\"\n                 ref={urlRef}\n                 placeholder=\"Ссылка на картинку\"\n                 className=\"form__input form__input_link\"\n                 required\n          />\n          <span className=\"form__input-error\"\n                id=\"avatar-link-input-error\">\n          </span>\n        </>\n      )}\n    />\n  )\n}\n","import { apiInfo } from \"./utils.js\";\n\nclass Api {\n  constructor({ baseUrl, headers }) {\n    this._baseUrl = baseUrl;\n    this._headers = headers;\n  }\n\n  _checkResponseData(res) {\n    if (res.ok) {\n      return res.json()\n    } else {\n      return Promise.reject(`Ошибка: ${res.status}`);\n    }\n  }\n\n  getInitialCards() {\n    return fetch(`${this._baseUrl}/cards`, {\n      headers: this._headers\n    })\n      .then(res => this._checkResponseData(res))\n  }\n\n  getUserInfo() {\n    return fetch(`${this._baseUrl}/users/me`, {\n      headers: this._headers\n    })\n      .then(res => this._checkResponseData(res))\n  }\n\n  setNewUserInfo({ name, about }) {\n    return fetch(`${this._baseUrl}/users/me`, {\n      method: 'PATCH',\n      headers: this._headers,\n      body: JSON.stringify({\n        name: name,\n        about: about\n      })\n    })\n      .then(res => this._checkResponseData(res))\n  }\n\n  setNewAvatar({ avatar }) {\n    return fetch(`${this._baseUrl}/users/me/avatar`, {\n      method: 'PATCH',\n      headers: this._headers,\n      body: JSON.stringify({\n        avatar: avatar\n      })\n    })\n      .then(res => this._checkResponseData(res))\n  }\n\n  addNewCard({ name, link }) {\n    return fetch(`${this._baseUrl}/cards`, {\n      method: 'POST',\n      headers: this._headers,\n      body: JSON.stringify({\n        name: name,\n        link: link\n      })\n    })\n      .then(res => this._checkResponseData(res))\n  }\n\n  like(cardId) {\n    return fetch(`${this._baseUrl}/cards/likes/${cardId}`, {\n      method: 'PUT',\n      headers: this._headers\n    })\n      .then(res => this._checkResponseData(res))\n  }\n\n  dislike(cardId) {\n    return fetch(`${this._baseUrl}/cards/likes/${cardId}`, {\n      method: 'DELETE',\n      headers: this._headers\n    })\n      .then(res => this._checkResponseData(res))\n  }\n\n  delete(cardId) {\n    return fetch(`${this._baseUrl}/cards/${cardId}`, {\n      method: 'DELETE',\n      headers: this._headers\n    })\n      .then(res => this._checkResponseData(res))\n  }\n}\n\nexport const api = new Api(apiInfo);\n\n\n","export const apiInfo = {\n  baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-12',\n  headers: {\n    authorization: '46554895-2128-4943-bcbf-ffff5703844f',\n    'Content-Type': 'application/json'\n  }\n}\n","import PopupWithForm from \"./PopupWithForm\";\nimport React from \"react\";\n\nexport default function AddPlacePopup(props) {\n  const [name, setName] = React.useState('');\n  const [link, setLink] = React.useState('');\n\n  React.useEffect(() => {\n    setName('');\n    setLink('');\n  }, [props.isOpen])\n\n  function handleNameChange(evt) {\n    setName(evt.target.value);\n  }\n\n  function handleLinkChange(evt) {\n    setLink(evt.target.value);\n  }\n\n  function handleClose() {\n    props.onClose();\n  }\n\n  function handleSubmit(evt) {\n    evt.preventDefault();\n\n    props.onAddPlace({\n      name: name,\n      link: link\n    })\n  }\n\n  return (\n    <PopupWithForm\n      isOpen={props.isOpen}\n      onClose={handleClose}\n      onSubmit={handleSubmit}\n      overlayCloseEffect={props.overlayCloseEffect}\n      name=\"new-card\"\n      title=\"Новое место\"\n      button=\"Создать\"\n      children={(\n        <>\n          <input\n            type=\"text\"\n            id=\"place-input\"\n            name=\"name\"\n            placeholder=\"Название\"\n            value={name}\n            onChange={handleNameChange}\n            className=\"form__input form__input_name\"\n            minLength=\"2\" maxLength=\"30\"\n            pattern=\"^[A-Za-zА-Яа-яЁё \\-]+$\"\n            required\n          />\n          <span className=\"form__input-error\"\n                id=\"place-input-error\">\n          </span>\n          <input\n            type=\"url\"\n            id=\"link-input\"\n            name=\"link\"\n            placeholder=\"Ссылка на картинку\"\n            value={link}\n            onChange={handleLinkChange}\n            className=\"form__input form__input_link\"\n            required\n          />\n          <span className=\"form__input-error\"\n                id=\"link-input-error\">\n          </span>\n        </>\n      )}\n    />\n  )\n}\n","import React from 'react';\nimport { Route, Redirect } from \"react-router-dom\";\n\nconst ProtectedRoute = ({ component: Component, ...props  }) => {\n  return (\n    <Route>\n      {\n        () => props.loggedIn ? <Component {...props} /> : <Redirect to=\"./signin\" />\n      }\n    </Route>\n  )}\n\nexport default ProtectedRoute;\n\n\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nexport default function Register(props) {\n  const [password, setPassword] = React.useState('');\n  const [email, setEmail] = React.useState('');\n\n  function handleLoginRedirect() {\n    props.onHeaderChange('login')\n  }\n\n  function handleEmailChange(evt) {\n    setEmail(evt.target.value);\n  }\n\n  function handlePasswordChange(evt) {\n    setPassword(evt.target.value);\n  }\n\n  const handleSubmit = (evt) => {\n    evt.preventDefault();\n    props.onSubmit(password, email);\n    setPassword('');\n  }\n\n  return (\n    <main>\n      <section className=\"auth\">\n\n        <form className=\"auth-form\"\n              onSubmit={handleSubmit}\n        >\n          <h2 className=\"auth-form__title\">Регистрация</h2>\n          <input\n            type=\"email\"\n            placeholder=\"Email\"\n            className=\"auth-form__input\"\n            value={email}\n            onChange={handleEmailChange}\n            required\n          />\n          <input\n            type=\"password\"\n            placeholder=\"Пароль\"\n            className=\"auth-form__input\"\n            value={password}\n            onChange={handlePasswordChange}\n            required\n          />\n          <button type=\"submit\"\n                  className=\"auth-form__submit\"\n                  onClick={handleLoginRedirect}\n          >\n            Зарегистрироваться\n          </button>\n        </form>\n\n        <p className=\"auth__redirect\">\n          Уже зарегистрированы? {<Link to=\"/signin\"\n                                       className=\"link\"\n                                       onClick={handleLoginRedirect}\n        >\n          Войти\n        </Link>}\n        </p>\n      </section>\n    </main>\n  )\n}\n","import React from \"react\";\nimport okPath from '../images/icon-ok.svg';\nimport failPath from '../images/icon-cross.svg';\n\nexport const InfoTooltipContext = React.createContext();\n\nexport const infoTooltipCaptions = {\n  success: {\n    text: 'Вы успешно зарегистрировались!',\n    imgPath: okPath\n  },\n  fail: {\n    text: 'Что-то пошло не так!\\n' +\n      'Попробуйте ещё раз.',\n    imgPath: failPath\n  }\n}\n","import React from \"react\";\nimport { InfoTooltipContext } from \"../contexts/infoTooltipContext\";\n\nexport default function InfoTooltip(props) {\n  const infoTooltipContext = React.useContext(InfoTooltipContext);\n\n  React.useEffect(() => {\n    props.overlayCloseEffect('infoTooltip');\n  }, [])\n\n  return (\n    <section className={`popup ${props.isOpen && 'popup_opened'}`}\n             id=\"popup__infoTooltip\"\n    >\n      <div className=\"infoTooltip\">\n        <img className=\"infoTooltip__icon\"\n             src={infoTooltipContext.imgPath}\n             alt=\"Результат регистрации\"\n        />\n        <p className=\"infoTooltip__caption\">\n          {infoTooltipContext.text}\n        </p>\n        <button onClick={props.onClose}\n                type=\"button\"\n                className=\"popup__close\"\n        >\n        </button>\n      </div>\n    </section>\n  )\n}\n","class Auth {\n  constructor() {\n    this._baseUrl = 'https://auth.nomoreparties.co'\n  }\n\n  register(pass, email) {\n    return fetch(`${this._baseUrl}/signup`, {\n      method: 'POST',\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({\n        \"password\": pass,\n        \"email\": email\n      })\n    })\n      .then((res) => {\n        console.log(res);\n        try {\n          if (res.status === 201){\n            return res.json();\n          }\n        } catch(err){\n          return (err);\n        }\n      })\n      .then(res => {\n        return res;\n      })\n  }\n\n  singIn(pass, email) {\n    return fetch(`${this._baseUrl}/signin`, {\n      method: 'POST',\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({\n        \"password\": pass,\n        \"email\": email\n      })\n    })\n      .then(res => res.json())\n      .then(data => {\n        if (data.token) {\n          localStorage.setItem('token', data.token);\n          return data;\n        } else {\n          return;\n        }\n      })\n  }\n\n  getContent(token) {\n    return fetch(`${this._baseUrl}/users/me`, {\n      method: 'GET',\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": `Bearer ${token}`\n      }\n    })\n      .then(res => res.json())\n  }\n}\n\nexport const auth = new Auth();\n","import React from 'react';\nimport '../index.css';\nimport Header from \"./Header\";\nimport Main from \"./Main\";\nimport Footer from \"./Footer\";\nimport Login from \"./Login\";\nimport ImagePopup from \"./ImagePopup\";\nimport EditProfilePopup from \"./EditProfilePopup\";\nimport EditAvatarPopup from \"./EditAvatarPopup\";\nimport { api } from \"../utils/Api\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\nimport AddPlacePopup from \"./AddPlacePopup\";\nimport { Route, Switch, withRouter, useHistory } from 'react-router-dom';\nimport ProtectedRoute from \"./ProtectedRoute\";\nimport Register from \"./Register\";\nimport InfoTooltip from \"./InfoTooltip\";\nimport { HeaderContext, headers } from \"../contexts/HeaderContext\";\nimport { InfoTooltipContext, infoTooltipCaptions } from \"../contexts/infoTooltipContext\";\nimport { auth } from \"../utils/Auth\";\n\nfunction App() {\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\n  const [isImagePopupOpen, setIsImagePopupOpen] = React.useState(false);\n  const [isInfoTooltipOpen, setIsInfoTooltipOpen] = React.useState(false);\n  const [selectedCard, setSelectedCard] = React.useState({});\n  const [currentUser, setCurrentUser] = React.useState({});\n  const [loggedIn, setLoggedIn] = React.useState(false);\n  const [headerContext, setHeaderContext] = React.useState('login');\n  const [infoTooltipContext, setInfoTooltipContext] = React.useState('fail');\n  const [email, setEmail] = React.useState('');\n\n  const history = useHistory();\n\n  React.useEffect(() => {\n    api.getUserInfo()\n      .then(res => {\n        setCurrentUser(res);\n      })\n      .catch(err => {\n        console.log(`Ошибка: ${err}`);\n      })\n  }, [])\n\n  function overlayCloseEffect(popupName) {\n    function handleOverlayClose(evt) {\n      if (evt.target.classList.contains('popup_opened')) {\n        closeAllPopups();\n      }\n    }\n\n    document\n      .getElementById(`popup__${popupName}`)\n      .addEventListener('click', handleOverlayClose)\n\n    return() => {\n      document\n        .getElementById(`popup__${popupName}`)\n        .removeEventListener('click', handleOverlayClose)\n    }\n  }\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(true);\n  }\n\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true);\n  }\n\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(true);\n  }\n\n  function handleCardClick(card) {\n    setIsImagePopupOpen(true);\n    setSelectedCard(card);\n  }\n\n  function handleInfoTooltipOpen() {\n    setIsInfoTooltipOpen(true);\n  }\n\n  function closeAllPopups() {\n    setIsEditAvatarPopupOpen(false);\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsImagePopupOpen(false);\n    setIsInfoTooltipOpen(false);\n    setSelectedCard({});\n  }\n\n  function handleUpdateUser(newUserInfo) {\n    api.setNewUserInfo(newUserInfo)\n      .then((data) => {\n        setCurrentUser(data);\n        closeAllPopups();\n      })\n      .catch(err => {\n        console.log(`Ошибка: ${err}`)\n      });\n  }\n\n  function handleUpdateAvatar({avatar}) {\n    api.setNewAvatar({avatar})\n      .then((data) => {\n        setCurrentUser(data);\n        closeAllPopups();\n      })\n      .catch(err => {\n        console.log(`Ошибка: ${err}`)\n      });\n  }\n\n  const [cards, setCards] = React.useState([]);\n\n  React.useEffect(() => {\n    api.getInitialCards()\n      .then(res => {\n        setCards(res);\n      })\n      .catch(err => {\n        console.log(`Ошибка: ${err}`)\n      });\n  }, [])\n\n  React.useEffect(() => {\n    function tokenCheck() {\n      const jwt = localStorage.getItem('token');\n      if (jwt) {\n        auth.getContent(jwt)\n          .then(res => {\n            if (res) {\n              handleLogin();\n              setEmail(res.data.email);\n              history.push('/');\n            }\n          })\n          .catch(err => console.log(err))\n      }\n    }\n\n      tokenCheck();\n  }, [loggedIn, history])\n\n\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n    (isLiked ? api.dislike(card._id) : api.like(card._id))\n      .then((likedCard) => {\n        const newCards = cards.map((currentCard) =>\n          currentCard._id === card._id ? likedCard : currentCard\n        );\n        setCards(newCards);\n      })\n      .catch(err => {\n        console.log(`Ошибка: ${err}`)\n      });\n  }\n\n  function handleCardDelete(card) {\n    api.delete(card._id)\n      .then(() => {\n        const newCards = cards.filter(currentCard =>\n          currentCard._id !== card._id\n        );\n        setCards(newCards);\n      })\n      .catch(err => {\n        console.log(`Ошибка: ${err}`)\n      });\n  }\n\n  function handleAddPlaceSubmit(newCardInfo) {\n    api.addNewCard(newCardInfo)\n      .then((newCard) => {\n        setCards([newCard, ...cards]);\n        closeAllPopups();\n      })\n      .catch(err => {\n        console.log(`Ошибка: ${err}`)\n      });\n  }\n\n  function handleLogin() {\n    setLoggedIn(true);\n  }\n\n  function handleLogout() {\n    setLoggedIn(false);\n  }\n\n  function handleBtnSignOut() {\n    handleLogout();\n    localStorage.removeItem('token');\n    history.push('/signin');\n  }\n\n  function handleLoginFormSubmit(password, email) {\n    auth.singIn(password, email)\n      .then(data => {\n        if (data.token) {\n          handleLogin();\n          history.push('/');\n        }\n      })\n      .catch(() => {\n        setInfoTooltipContext('fail');\n        handleInfoTooltipOpen();\n      })\n  }\n\n  function handleRegisterFormSubmit(password, email) {\n    auth.register(password, email)\n      .then(res => {\n        if (res) {\n          setInfoTooltipContext('success');\n          history.push('/signin');\n        } else {\n          setInfoTooltipContext('fail');\n        }\n      })\n      .catch(err => console.log(err))\n      .finally(() => {\n        handleInfoTooltipOpen();\n      })\n  }\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"page\">\n        <div className=\"content\">\n          <HeaderContext.Provider value={headers[headerContext]}>\n            <Header loggedIn={loggedIn}\n                    email={email}\n                    onSignOut={handleBtnSignOut}\n                    onHeaderChange={setHeaderContext}\n            />\n          </HeaderContext.Provider>\n\n          <Switch>\n            <Route path=\"/signup\">\n              <Register onHeaderChange={setHeaderContext}\n                        onSubmit={handleRegisterFormSubmit}\n              />\n            </Route>\n\n            <Route path=\"/signin\">\n              <Login onHeaderChange={setHeaderContext}\n                     onSubmit={handleLoginFormSubmit}\n              />\n            </Route>\n\n            <ProtectedRoute path=\"/\"\n                            loggedIn={loggedIn}\n                            component={Main}\n                            onEditProfile={handleEditProfileClick}\n                            onAddPlace={handleAddPlaceClick}\n                            onEditAvatar={handleEditAvatarClick}\n                            onCardClick={handleCardClick}\n                            cards={cards}\n                            onCardLike={handleCardLike}\n                            onCardDelete={handleCardDelete}\n            />\n          </Switch>\n\n          {loggedIn && <Footer/>}\n\n          <InfoTooltipContext.Provider value={infoTooltipCaptions[infoTooltipContext]}>\n            <InfoTooltip\n              isOpen={isInfoTooltipOpen}\n              onClose={closeAllPopups}\n              loggedIn={loggedIn}\n              overlayCloseEffect={overlayCloseEffect}\n            />\n          </InfoTooltipContext.Provider>\n\n          <EditProfilePopup\n            isOpen={isEditProfilePopupOpen}\n            onClose={closeAllPopups}\n            onUpdateUser={handleUpdateUser}\n            overlayCloseEffect={overlayCloseEffect}\n          />\n\n          <AddPlacePopup\n            isOpen={isAddPlacePopupOpen}\n            onClose={closeAllPopups}\n            onAddPlace={handleAddPlaceSubmit}\n            overlayCloseEffect={overlayCloseEffect}\n          />\n\n          <EditAvatarPopup\n            isOpen={isEditAvatarPopupOpen}\n            onClose={closeAllPopups}\n            onAvatarUpdate={handleUpdateAvatar}\n            overlayCloseEffect={overlayCloseEffect}\n          />\n\n          <ImagePopup\n            isOpen={isImagePopupOpen}\n            onClose={closeAllPopups}\n            card={selectedCard}\n            overlayCloseEffect={overlayCloseEffect}\n          />\n        </div>\n      </div>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default withRouter(App);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport { BrowserRouter } from \"react-router-dom\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>\n  ,document.getElementById('root')\n);\n\n"],"sourceRoot":""}